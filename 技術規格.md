# 🔧 PiPiBUY 技術規格文件

## 📊 系統概覽

### 專案資訊
- **專案名稱**: PiPiBUY 電腦零件購物網站
- **版本**: v1.0
- **開發時間**: 2025-08-27
- **架構類型**: 單頁應用程式 (SPA) + 管理後台
- **部署方式**: 靜態網站託管

### 核心功能
- 🛍️ 前台電商系統
- 🔧 後台管理系統  
- 📸 圖片管理系統
- 🔄 即時資料同步
- 📱 響應式設計

---

## 💻 技術棧

### 前端技術
```
HTML5          - 語義化標記語言
├── 結構標準   - HTML5 semantic elements
├── 表單處理   - Modern form validation
└── 可訪問性   - ARIA labels & roles

CSS3           - 現代樣式技術
├── 佈局系統   - CSS Grid + Flexbox
├── 動畫效果   - CSS Animations & Transitions  
├── 響應式設計 - Media Queries
└── 變數系統   - CSS Custom Properties

JavaScript ES6+ - 現代JavaScript
├── 模組化     - ES6 Modules (概念)
├── 異步處理   - Promises & async/await
├── DOM操作    - Modern DOM APIs
├── 事件處理   - Event delegation
└── 本地儲存   - localStorage API
```

### 資料處理
```
localStorage   - 瀏覽器本地儲存
├── 商品資料庫 - JSON格式儲存
├── 購物車     - 即時狀態保存
├── 用戶設定   - 偏好設定儲存
└── 管理員認證 - 基本身份驗證

JSON           - 資料交換格式
├── 商品結構   - 標準化商品資料
├── 訂單格式   - 訂單資訊結構
└── 設定檔     - 系統設定儲存
```

### 圖片處理
```
Canvas API     - 客戶端圖片處理
├── 圖片壓縮   - 動態尺寸調整
├── 格式轉換   - 自動WebP轉換
└── 品質控制   - 85%品質壓縮

FileReader API - 本地檔案讀取
├── 圖片上傳   - 多檔案批量處理
├── 預覽功能   - 即時圖片預覽
└── 格式驗證   - 支援JPG/PNG
```

---

## 📁 程式碼結構分析

### 前台 (script.js - 2800+ 行)
```javascript
// 核心功能模組
├── 商品管理 (lines 1-500)
│   ├── 商品載入與顯示
│   ├── 分類篩選系統
│   ├── 品牌篩選功能
│   └── 商品搜尋邏輯
│
├── 購物車系統 (lines 501-1000)
│   ├── 添加/移除商品
│   ├── 數量調整
│   ├── 價格計算
│   └── 訂單處理
│
├── UI交互功能 (lines 1001-1500)
│   ├── 模態窗口管理
│   ├── 動畫效果處理
│   ├── 事件監聽器
│   └── 響應式處理
│
├── 圖片庫系統 (lines 1501-2000)
│   ├── 圖片瀏覽器
│   ├── 鍵盤導航
│   ├── 縮圖管理
│   └── 圖片切換邏輯
│
└── 資料同步 (lines 2001-2800+)
    ├── localStorage操作
    ├── 即時資料更新
    ├── 狀態管理
    └── 錯誤處理
```

### 後台 (admin.js - 1400+ 行)
```javascript
// 管理系統模組
├── 身份驗證 (lines 1-200)
│   ├── 登入驗證
│   ├── 會話管理
│   └── 權限控制
│
├── 商品管理 (lines 201-800)
│   ├── CRUD操作
│   ├── 狀態管理
│   ├── 圖片處理
│   └── 表單驗證
│
├── 訂單管理 (lines 801-1100)
│   ├── 訂單查看
│   ├── 狀態更新
│   ├── 統計報表
│   └── 匯出功能
│
└── 系統功能 (lines 1101-1400+)
    ├── 資料遷移
    ├── 備份還原
    ├── 設定管理
    └── 日誌記錄
```

### 樣式系統 (styles.css - 1000+ 行)
```css
/* 樣式模組結構 */
├── 基礎樣式 (lines 1-200)
│   ├── CSS Reset
│   ├── 變數定義
│   ├── 字體設定
│   └── 通用類別
│
├── 佈局系統 (lines 201-400)
│   ├── Grid系統
│   ├── Flexbox佈局
│   ├── 容器樣式
│   └── 間距系統
│
├── 組件樣式 (lines 401-700)
│   ├── 按鈕樣式
│   ├── 表單元件
│   ├── 卡片組件
│   └── 模態窗口
│
├── 動畫系統 (lines 701-900)
│   ├── 載入動畫
│   ├── 過場效果
│   ├── Hover效果
│   └── 鍵幀動畫
│
└── 響應式設計 (lines 901-1000+)
    ├── 手機版樣式
    ├── 平板版樣式
    ├── 桌面版樣式
    └── 高解析度支援
```

---

## 🗃️ 資料結構規格

### 商品資料結構
```javascript
{
  id: number,                    // 唯一識別碼
  name: string,                  // 商品名稱
  price: number,                 // 價格 (新台幣)
  category: string,              // 商品分類
  brand: string,                 // 品牌名稱
  emoji: string,                 // 商品圖示
  status: 'active'|'inactive'|'draft', // 商品狀態
  description: string,           // 商品描述
  specifications: {              // 商品規格
    [key: string]: string        // 規格項目
  },
  images: {                      // 圖片資訊
    cover: string,               // 封面圖片路徑
    gallery: string[]            // 內頁圖片陣列
  },
  bgColor: string,               // 品牌主色
  createdAt: string,             // 建立時間 (ISO 8601)
  updatedAt: string              // 更新時間 (ISO 8601)
}
```

### 購物車資料結構
```javascript
[{
  id: number,                    // 商品ID
  name: string,                  // 商品名稱
  price: number,                 // 單價
  quantity: number,              // 數量
  image: string,                 // 商品圖片
  category: string,              // 商品分類
  brand: string                  // 品牌
}]
```

### 訂單資料結構
```javascript
{
  id: string,                    // 訂單編號
  customerInfo: {                // 客戶資訊
    name: string,
    email: string,
    phone: string,
    address: string
  },
  items: [                       // 訂單項目
    {
      id: number,
      name: string,
      price: number,
      quantity: number
    }
  ],
  services: {                    // 附加服務
    testing: boolean,            // 測試服務
    assembly: boolean            // 組裝服務
  },
  totals: {                      // 金額統計
    subtotal: number,            // 商品小計
    serviceTotal: number,        // 服務費用
    total: number                // 總金額
  },
  status: string,                // 訂單狀態
  createdAt: string,             // 建立時間
  updatedAt: string              // 更新時間
}
```

---

## ⚙️ 系統配置

### localStorage 鍵值對應
```javascript
'productsDatabase'     // 商品資料庫
'cart'                // 購物車資料
'adminCredentials'    // 管理員認證
'adminSettings'       // 系統設定
'ordersDatabase'      // 訂單資料庫
'customerOrders'      // 客戶訂單記錄
```

### 預設設定值
```javascript
const DEFAULT_CONFIG = {
  // 管理員認證
  admin: {
    username: 'admin',
    password: 'admin123'
  },
  
  // 圖片處理設定
  imageProcessing: {
    maxWidth: 800,
    maxHeight: 600,
    quality: 0.85,
    format: 'image/webp'
  },
  
  // 系統設定
  system: {
    autoSync: true,
    syncInterval: 3000,
    maxProductsPerPage: 50,
    enableAnimations: true
  },
  
  // 服務價格
  services: {
    testing: 500,
    assembly: 800
  }
};
```

### 支援的商品分類
```javascript
const CATEGORIES = [
  'CPU',           // 中央處理器
  'GPU',           // 顯示卡
  '主機板',        // 主機板
  '記憶體',        // 記憶體
  '儲存',          // 儲存裝置
  '電源',          // 電源供應器
  '機殼',          // 電腦機殼
  '散熱',          // 散熱器
  '散熱膏',        // 散熱膏
  '系統風扇',      // 系統風扇
  '滑鼠',          // 滑鼠
  '鍵盤',          // 鍵盤
  '擴充卡'         // 擴充卡
];
```

### 支援的品牌列表
```javascript
const BRANDS = [
  'Intel', 'AMD', 'NVIDIA',
  'ASUS', 'MSI', 'Gigabyte',
  'Samsung', 'Corsair', 'G.Skill',
  'Kingston', 'WD', 'Seagate',
  'Seasonic', 'be quiet!', 'NZXT',
  'Fractal Design', 'Cooler Master',
  'Noctua', 'Arctic', 'Logitech',
  'Razer', 'SteelSeries', 'ADATA',
  'Micron', 'Transcend', 'FSP',
  'Super Flower', 'Thermaltake',
  'LIAN LI', 'darkFlash', 'ACER',
  'Cougar', 'TrendSonic', 'Biwin', 'EQ'
];
```

---

## 🎨 UI/UX 設計規格

### 色彩系統
```css
:root {
  /* 主要色彩 */
  --primary-color: #667eea;
  --secondary-color: #764ba2;
  --accent-color: #00d4aa;
  
  /* 功能色彩 */
  --success-color: #28a745;
  --warning-color: #ffc107;
  --danger-color: #dc3545;
  --info-color: #17a2b8;
  
  /* 中性色彩 */
  --dark-color: #212529;
  --light-color: #f8f9fa;
  --muted-color: #6c757d;
  
  /* 品牌色彩 */
  --intel-color: #0071c5;
  --amd-color: #ed1c24;
  --nvidia-color: #00d4aa;
}
```

### 字體系統
```css
:root {
  /* 字體家族 */
  --font-primary: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
  --font-mono: 'Consolas', 'Monaco', monospace;
  
  /* 字體大小 */
  --font-xs: 0.75rem;    /* 12px */
  --font-sm: 0.875rem;   /* 14px */
  --font-base: 1rem;     /* 16px */
  --font-lg: 1.125rem;   /* 18px */
  --font-xl: 1.25rem;    /* 20px */
  --font-2xl: 1.5rem;    /* 24px */
  --font-3xl: 1.875rem;  /* 30px */
  
  /* 行高 */
  --line-height-tight: 1.25;
  --line-height-base: 1.5;
  --line-height-relaxed: 1.75;
}
```

### 間距系統
```css
:root {
  /* 間距標準 */
  --space-1: 0.25rem;   /* 4px */
  --space-2: 0.5rem;    /* 8px */
  --space-3: 0.75rem;   /* 12px */
  --space-4: 1rem;      /* 16px */
  --space-5: 1.25rem;   /* 20px */
  --space-6: 1.5rem;    /* 24px */
  --space-8: 2rem;      /* 32px */
  --space-10: 2.5rem;   /* 40px */
  --space-12: 3rem;     /* 48px */
  --space-16: 4rem;     /* 64px */
  --space-20: 5rem;     /* 80px */
}
```

### 斷點系統
```css
/* 響應式斷點 */
--breakpoint-sm: 576px;    /* 手機橫向 */
--breakpoint-md: 768px;    /* 平板直向 */
--breakpoint-lg: 992px;    /* 平板橫向 */
--breakpoint-xl: 1200px;   /* 桌面螢幕 */
--breakpoint-2xl: 1400px;  /* 大型螢幕 */
```

### 陰影系統
```css
:root {
  /* 陰影層級 */
  --shadow-sm: 0 1px 2px rgba(0, 0, 0, 0.05);
  --shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
  --shadow-md: 0 4px 6px rgba(0, 0, 0, 0.1);
  --shadow-lg: 0 10px 15px rgba(0, 0, 0, 0.1);
  --shadow-xl: 0 20px 25px rgba(0, 0, 0, 0.1);
  --shadow-2xl: 0 25px 50px rgba(0, 0, 0, 0.25);
}
```

---

## 🔒 安全性規格

### 資料驗證
```javascript
// 輸入驗證規則
const VALIDATION_RULES = {
  productName: {
    required: true,
    minLength: 2,
    maxLength: 200,
    pattern: /^[a-zA-Z0-9\u4e00-\u9fff\s\-_()]+$/
  },
  
  price: {
    required: true,
    min: 0,
    max: 999999,
    type: 'number'
  },
  
  email: {
    required: true,
    pattern: /^[^\s@]+@[^\s@]+\.[^\s@]+$/
  },
  
  phone: {
    required: true,
    pattern: /^[\d\-\+\(\)\s]+$/,
    minLength: 8
  }
};
```

### XSS 防護
```javascript
// HTML編碼函數
function escapeHtml(text) {
  const div = document.createElement('div');
  div.textContent = text;
  return div.innerHTML;
}

// 清理用戶輸入
function sanitizeInput(input) {
  return escapeHtml(input.trim());
}
```

### 圖片安全檢查
```javascript
// 允許的圖片格式
const ALLOWED_IMAGE_TYPES = [
  'image/jpeg',
  'image/jpg', 
  'image/png',
  'image/webp'
];

// 最大檔案大小 (5MB)
const MAX_FILE_SIZE = 5 * 1024 * 1024;
```

---

## 📈 效能規格

### 載入效能目標
- **首次載入時間**: < 3秒
- **圖片載入時間**: < 2秒
- **商品渲染時間**: < 1秒
- **操作響應時間**: < 200ms

### 記憶體使用
- **基礎記憶體**: ~10MB
- **圖片快取**: ~20MB
- **資料快取**: ~5MB
- **總計目標**: < 50MB

### 儲存空間
- **程式碼**: ~200KB
- **圖片**: ~30MB
- **資料**: ~1MB
- **總計**: ~31MB

### 網路需求
- **初始載入**: ~200KB
- **圖片載入**: 依需求
- **離線功能**: ✅ 完整支援

---

## 🔧 開發工具配置

### 開發環境需求
```
Node.js        >= 16.0.0 (可選，用於開發工具)
瀏覽器         Chrome 70+, Firefox 65+, Safari 12+, Edge 79+
編輯器         VS Code, Sublime Text, 或任何文字編輯器
HTTP伺服器     Live Server, http-server, 或任何靜態伺服器
```

### VS Code 建議擴充
```
- Live Server           # 即時預覽
- Prettier              # 程式碼格式化
- ESLint                # JavaScript語法檢查
- Auto Rename Tag       # HTML標籤同步重新命名
- Bracket Pair Colorizer # 括號配對顏色
- CSS Peek              # CSS類別快速檢視
```

### 程式碼標準
```javascript
// JavaScript 編碼標準
{
  "indent": 4,                    // 4空格縮排
  "quotes": "single",             // 單引號
  "semicolons": true,             // 強制分號
  "trailingComma": "es5",         // ES5尾隨逗號
  "camelCase": true,              // 駝峰命名
  "functionNaming": "camelCase",  // 函數命名
  "constantNaming": "UPPER_CASE"  // 常數命名
}
```

---

## 🧪 測試規格

### 功能測試檢查清單
```
前台功能測試:
□ 商品顯示正常
□ 分類篩選功能
□ 品牌篩選功能
□ 價格排序功能
□ 購物車新增/移除
□ 數量調整功能
□ 訂單提交流程
□ 圖片庫瀏覽
□ 響應式佈局

後台功能測試:
□ 管理員登入
□ 商品CRUD操作
□ 圖片上傳功能
□ 商品上下架
□ 訂單管理
□ 統計報表
□ 設定管理
□ 資料匯出

跨瀏覽器測試:
□ Chrome (最新版)
□ Firefox (最新版)  
□ Safari (最新版)
□ Edge (最新版)

裝置測試:
□ 桌面電腦 (1920x1080)
□ 筆記型電腦 (1366x768)
□ 平板電腦 (768x1024)
□ 手機裝置 (375x667)
```

### 效能測試指標
```javascript
// 效能監控代碼
const performanceMetrics = {
  // 載入時間測量
  loadTime: performance.now(),
  
  // 記憶體使用監控
  memoryUsage: performance.memory,
  
  // FPS監控 (動畫效能)
  fps: measureFPS(),
  
  // 網路請求監控
  networkRequests: performance.getEntriesByType('resource')
};
```

---

## 🚀 部署規格

### 靜態託管需求
```
檔案支援格式:
├── HTML, CSS, JavaScript
├── 圖片檔案: JPG, PNG, WebP, SVG
├── 字體檔案: WOFF, WOFF2 (如使用)
└── 其他: JSON, MD (文件檔案)

伺服器設定:
├── HTTPS 支援 (推薦)
├── Gzip 壓縮啟用
├── 快取標頭設定
└── 錯誤頁面設定
```

### CDN 設定建議
```
快取策略:
├── HTML: no-cache
├── CSS/JS: max-age=31536000 (1年)
├── 圖片: max-age=2592000 (30天)
└── 字體: max-age=31536000 (1年)
```

### 監控設定
```javascript
// 錯誤監控
window.addEventListener('error', (e) => {
  console.error('系統錯誤:', e.error);
  // 可串接錯誤追蹤服務
});

// 效能監控
window.addEventListener('load', () => {
  const loadTime = performance.now();
  console.log('頁面載入時間:', loadTime + 'ms');
});
```

---

## 📚 API 文件 (內部函數)

### 核心 API
```javascript
// 商品管理 API
window.products                    // 商品陣列
loadProductsFromStorage()          // 載入商品資料
renderProducts()                   // 渲染商品顯示
filterProducts()                   // 篩選商品
sortProducts(products)             // 排序商品

// 購物車 API
addToCart(productId)               // 新增到購物車
removeFromCart(productId)          // 從購物車移除
updateCartQuantity(productId, qty) // 更新購物車數量
clearCart()                        // 清空購物車

// 圖片管理 API
updateProductImages()              // 執行圖片匹配
showProductGallery(productId)      // 顯示圖片庫
handleCoverImageUpload(input)      // 處理封面圖片
handleGalleryImagesUpload(input)   // 處理內頁圖片

// 後台管理 API
adminSystem.showAddProductModal()  // 顯示新增商品視窗
adminSystem.editProduct(id)        // 編輯商品
adminSystem.deleteProduct(id)      // 刪除商品
adminSystem.toggleProductStatus(id)// 切換商品狀態
```

---

**文件版本**: v1.0  
**最後更新**: 2025-08-27  
**維護狀態**: ✅ 完整記錄，可用於開發參考